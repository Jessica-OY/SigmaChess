import chess

class ChessBoard:
    def __init__(self):
        """初始化棋盘"""
        self.board = chess.Board()

    def make_move(self, move):
        """执行走法"""
        self.board.push(move)

    def undo_move(self):
        """撤销上一步走法"""
        if self.board.move_stack:
            self.board.pop()

    def is_game_over(self):
        """判断游戏是否结束"""
        return self.board.is_game_over()

    def get_legal_moves(self):
        """获取当前局面所有合法走法"""
        return list(self.board.legal_moves)

    def get_result(self):
        """获取游戏结果"""
        if self.board.is_checkmate():
            return "Checkmate"
        elif self.board.is_stalemate():
            return "Stalemate"
        elif self.board.is_insufficient_material():
            return "Insufficient material"
        elif self.board.is_seventyfive_moves():
            return "75 moves rule"
        elif self.board.is_fivefold_repetition():
            return "Fivefold repetition"
        else:
            return "Game continues"

    def __str__(self):
        """返回棋盘的字符串表示"""
        return str(self.board)
